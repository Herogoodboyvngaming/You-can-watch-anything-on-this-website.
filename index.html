<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Trang web xem g√¨ c≈©ng ƒë∆∞·ª£c</title>
    <script src="https://www.youtube.com/iframe_api"></script>
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        @property --angle { syntax: '<angle>'; initial-value: 0deg; inherits: false; }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient-move 15s ease infinite;
            color: #fff; font-family: 'Segoe UI', sans-serif; overflow: hidden;
            position: relative;
        }

        #particleCanvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1;
        }

        @keyframes gradient-move {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .ripple {
            position: absolute; border-radius: 50%; background: rgba(255, 255, 255, 0.5);
            transform: scale(0); animation: ripple-animation 0.4s ease-out; pointer-events: none; z-index: 99999;
        }
        @keyframes ripple-animation { to { transform: scale(1.5); opacity: 0; } }

        body::before {
            content: ""; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            border: 5px solid transparent;
            border-image: linear-gradient(var(--angle), red, yellow, lime, cyan, blue, magenta, red) 1;
            z-index: 9999; pointer-events: none;
            animation: rotate-angle 10s linear infinite;
        }
        @keyframes rotate-angle { to { --angle: 360deg; } }

        .container { width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; padding: 20px; z-index: 10; position: relative; }
        header h1 { font-size: 1.4rem; color: #333; text-transform: uppercase; margin: 0; text-shadow: 1px 1px 2px rgba(255,255,255,0.4); }
        .author-text { font-weight: bold; font-size: 0.85rem; color: #444; margin-top: 5px; }

        #mainMenu { width: 100%; max-width: 500px; display: flex; flex-direction: column; height: 80vh; }
        .search-group { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); padding: 20px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.2); }
        input { width: 100%; padding: 14px; border-radius: 12px; border: none; background: rgba(0,0,0,0.5); color: #fff; margin-bottom: 15px; outline: none; }

        #actionBtn { 
            width: 100%; padding: 14px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; 
            background: linear-gradient(90deg, #ff0000, #ff5555); color: #fff; text-transform: uppercase;
            box-shadow: 0 0 15px rgba(255,0,0,0.3); animation: pulse-btn 2s infinite;
        }
        @keyframes pulse-btn { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

        #results { width: 100%; margin-top: 15px; overflow-y: auto; flex-grow: 1; }
        .video-item { 
            display: flex; align-items: center; background: rgba(0,0,0,0.6); margin-bottom: 10px; padding: 10px; border-radius: 12px; 
            border: 1px solid rgba(255,255,255,0.1); animation: slideUp 0.4s ease forwards; opacity: 0;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .tag-container { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 5px; }
        .video-tag { font-size: 0.6rem; background: #ff0000; color: #fff; padding: 2px 6px; border-radius: 4px; font-weight: bold; text-transform: uppercase; }

        #mainWatch { display: none; width: 100%; flex-direction: column; align-items: center; }
        .player-border { width: 100%; max-width: 800px; padding: 4px; background: linear-gradient(var(--angle), red, cyan, magenta, red); border-radius: 15px; animation: rotate-angle 5s linear infinite; }
        .player-content { background: #000; border-radius: 10px; position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; }
        #videoFrame { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        .progress-container { width: 100%; max-width: 800px; height: 24px; background: #111; border-radius: 15px; margin-top: 15px; position: relative; overflow: hidden; border: 1px solid rgba(255,255,255,0.2); }
        #progressBar { height: 100%; width: 0%; transition: width 0.5s linear, background-color 0.5s ease; }
        #progressText { position: absolute; width: 100%; text-align: center; font-size: 0.8rem; font-weight: bold; top: 4px; color: #fff; text-shadow: 1px 1px 3px #000; z-index: 5; }
        
        .control-panel { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; width: 100%; max-width: 500px; margin-top: 15px; }
        .ctrl-btn { padding: 12px 5px; border: none; border-radius: 10px; font-weight: bold; color: #fff; font-size: 0.7rem; cursor: pointer; }
        .btn-stop { background: #ff0000; } .btn-pause { background: #ffaa00; } .btn-home { background: #00f2fe; color: #000; } .btn-bg { background: #9900ff; }

        footer { margin-top: auto; padding: 15px; text-align: center; font-size: 0.7rem; color: #222; font-weight: bold; line-height: 1.4; }
    </style>
</head>
<body onclick="createRipple(event)">

    <canvas id="particleCanvas"></canvas>

    <div class="container">
        <header>
            <h1>Trang web xem g√¨ c≈©ng ƒë∆∞·ª£c</h1>
            <p class="author-text">CODE B·ªûI : NGUY·ªÑN CH√ç D·ª∞ üáªüá≥</p>
        </header>

        <div id="mainMenu">
            <div class="search-group">
                <input type="text" id="userInput" placeholder="Nh·∫≠p t√™n video ho·∫∑c d√°n link..." oninput="updateButtonText()">
                <button id="actionBtn" onclick="handleLogic()">üìù G·ª¨I ƒê·∫æN H·ªÜ TH·ªêNG</button>
            </div>
            <div id="results"></div>
        </div>

        <div id="mainWatch">
            <div class="player-border">
                <div class="player-content" id="playerWrapper"></div>
            </div>
            <div class="progress-container">
                <div id="progressBar"></div>
                <div id="progressText">0%</div>
            </div>
            <div id="nowPlaying" style="margin-top:10px; font-size:0.85rem; font-weight:bold; text-align:center;">üéß ƒêang t·∫£i...</div>
            <div class="control-panel">
                <button class="ctrl-btn btn-stop" onclick="confirmStop()">üõë STOP</button>
                <button class="ctrl-btn btn-pause" id="playPauseBtn" onclick="togglePlay()">‚è∏Ô∏è T·∫†M D·ª™NG</button>
                <button class="ctrl-btn btn-bg" onclick="changeBg()">üé® ƒê·ªîI M√ÄU N·ªÄN</button>
                <button class="ctrl-btn btn-home" onclick="confirmHome()">üè† TRANG CH·ª¶</button>
            </div>
        </div>
        
        <footer>
            MADE IN VN üáªüá≥<br>
            MADE BY : Nguy·ªÖn Ch√≠ D·ª± üáªüá≥‚ô•Ô∏èüáªüá≥<br>
            ¬© B·∫¢N QUY·ªÄN WEBSITE THU·ªòC V·ªÄ : NGUY·ªÑN CH√ç D·ª∞ ‚ô•Ô∏èüáªüá≥‚ô•Ô∏è
        </footer>
    </div>

    <script>
        const API_KEY = 'AIzaSyAUjIhkSjpJ91X9Ua3ZTduij-mtArkcYas';
        let player, progressInterval, currentTitle = "";
        // ƒê√£ th√™m COVER v√†o danh s√°ch tags
        const tagsToFind = ["REMIX", "OFFICIAL", "MV", "OFFICIAL MV", "ORIGINAL", "LYRICS", "EDM", "VIDEO", "SHORTS", "COVER"];

        const canvas = document.getElementById('particleCanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function initParticles() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            particles = [];
            for (let i = 0; i < 50; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 2 + 1,
                    speedX: Math.random() * 1 - 0.5,
                    speedY: Math.random() * 1 - 0.5,
                    opacity: Math.random() * 0.5 + 0.2
                });
            }
        }
        function drawParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "white";
            particles.forEach(p => {
                ctx.globalAlpha = p.opacity;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();
                p.x += p.speedX; p.y += p.speedY;
                if (p.x < 0 || p.x > canvas.width) p.speedX *= -1;
                if (p.y < 0 || p.y > canvas.height) p.speedY *= -1;
            });
            requestAnimationFrame(drawParticles);
        }
        initParticles(); drawParticles();
        window.addEventListener('resize', initParticles);

        function createRipple(event) {
            const ripple = document.createElement("div");
            ripple.className = "ripple";
            document.body.appendChild(ripple);
            const size = 40; 
            ripple.style.width = ripple.style.height = `${size}px`;
            ripple.style.left = `${event.clientX - size/2}px`; ripple.style.top = `${event.clientY - size/2}px`;
            ripple.addEventListener("animationend", () => ripple.remove());
        }

        function updateButtonText() {
            const val = document.getElementById('userInput').value.trim();
            const btn = document.getElementById('actionBtn');
            if (val === "") btn.innerText = "üìù G·ª¨I ƒê·∫æN H·ªÜ TH·ªêNG";
            else if (val.includes('http')) btn.innerText = "‚åõ X√ÅC TH·ª∞C LINK";
            else btn.innerText = "üîç T√åM KI·∫æM";
        }

        function changeBg() {
            const colors = ['linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab)', 'linear-gradient(-45deg, #1a2a6c, #b21f1f, #fdbb2d)', 'linear-gradient(-45deg, #8e2de2, #4a00e0)'];
            document.body.style.background = colors[Math.floor(Math.random() * colors.length)];
            document.body.style.backgroundSize = "400% 400%";
        }

        function getTags(title) {
            let html = ""; const upperTitle = title.toUpperCase();
            tagsToFind.forEach(tag => { if (upperTitle.includes(tag)) html += `<span class="video-tag">${tag}</span>`; });
            return html ? `<div class="tag-container">${html}</div>` : "";
        }

        async function handleLogic() {
            const val = document.getElementById('userInput').value.trim();
            if (!val) { alert("‚ùå B·∫†N CH∆ØA NH·∫¨P G√å M√Ä üôÑ"); return; }
            if (val.includes('http')) {
                const btn = document.getElementById('actionBtn'); btn.innerText = "‚åõ ƒêANG X√ÅC TH·ª∞C...";
                setTimeout(() => {
                    const id = extractId(val);
                    if (id) { alert("‚úÖ X√ÅC TH·ª∞C LINK TH√ÄNH C√îNG"); btn.innerText = "‚åõ X√ÅC TH·ª∞C LINK"; playVideo(id); }
                    else { alert("‚ùå LINK B·ªä L·ªñI"); alert("‚ùå LINK KH√îNG HO·∫†T ƒê·ªòNG HO·∫∂C C√ì TH·ªÇ LINK ƒê√É B·ªä X√ìA HO·∫∂C H·∫æT H·∫†N"); btn.innerText = "‚åõ X√ÅC TH·ª∞C LINK"; }
                }, 3000);
            } else { searchYT(val); }
        }

        async function searchYT(q) {
            const btn = document.getElementById('actionBtn'); btn.innerText = "üîç ƒêANG T√åM...";
            try {
                const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=50&q=${q}&type=video&key=${API_KEY}`);
                if (res.status === 403) { alert("‚åõ T√åM KI·∫æM B·ªä GI·ªöI H·∫†N, VUI L√íNG B·∫†N D√ôNG LINK HO·∫∂C CH·ªú ƒê·ª¢I ƒê·∫æN NG√ÄY MAI ƒê·ªÇ H·ªÜ TH·ªêNG RESET M·ªöI L·∫†I CHO B·∫†N"); btn.innerText = "üîç T√åM KI·∫æM"; return; }
                const data = await res.json(); btn.innerText = "üîç T√åM KI·∫æM";
                const resBox = document.getElementById('results'); resBox.innerHTML = "";
                if(data.items) {
                    alert(`‚úÖ ƒê√É T√åM KI·∫æM TH√ÄNH C√îNG : ${data.items[0].snippet.title.toUpperCase()}`);
                    data.items.forEach((item, index) => {
                        const div = document.createElement('div'); div.className = 'video-item'; div.style.animationDelay = `${index * 0.05}s`;
                        div.onclick = () => { currentTitle = item.snippet.title; playVideo(item.id.videoId); };
                        div.innerHTML = `<img src="${item.snippet.thumbnails.medium.url}" style="width:80px;border-radius:8px;margin-right:12px;"><div class="video-info"><p class="video-title" style="font-size:0.8rem;color:#fff;margin:0;">${item.snippet.title}</p>${getTags(item.snippet.title)}</div>`;
                        resBox.appendChild(div);
                    });
                }
            } catch { alert("‚ùå KEY API L·ªñI"); btn.innerText = "üîç T√åM KI·∫æM"; }
        }

        function playVideo(id) {
            document.getElementById('mainMenu').style.display = 'none'; document.getElementById('mainWatch').style.display = 'flex';
            document.getElementById('playerWrapper').innerHTML = '<div id="videoFrame"></div>';
            player = new YT.Player('videoFrame', { videoId: id, playerVars: { 'autoplay': 1, 'controls': 1 }, events: { 'onStateChange': onStateChange, 'onReady': () => { document.getElementById('nowPlaying').innerText = "üéß ƒêANG PH√ÅT: " + currentTitle; }} });
        }

        function updateProgress() {
            clearInterval(progressInterval);
            progressInterval = setInterval(() => {
                if (player && player.getDuration) {
                    let per = Math.floor((player.getCurrentTime() / player.getDuration()) * 100) || 0;
                    const bar = document.getElementById('progressBar'); bar.style.width = per + "%"; document.getElementById('progressText').innerText = per + "%";
                    if (per < 55) bar.style.backgroundColor = "#00ff00";
                    else if (per < 65) bar.style.backgroundColor = "#ffff00";
                    else if (per < 85) bar.style.backgroundColor = "#0000ff";
                    else bar.style.backgroundColor = "#ff0000";
                }
            }, 1000);
        }

        function onStateChange(e) {
            if (e.data == YT.PlayerState.PLAYING) { document.getElementById('playPauseBtn').innerText = "‚è∏Ô∏è T·∫†M D·ª™NG"; updateProgress(); }
            else { document.getElementById('playPauseBtn').innerText = "‚ñ∂Ô∏è PH√ÅT"; clearInterval(progressInterval); }
        }

        function extractId(u) { const match = u.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/); return (match && match[2].length == 11) ? match[2] : null; }
        function togglePlay() { player.getPlayerState() == 1 ? player.pauseVideo() : player.playVideo(); }
        function confirmStop() { if(confirm("üõë D·ª™NG VIDEO: " + currentTitle.toUpperCase() + "?")) player.stopVideo(); }
        function confirmHome() { if(confirm("‚ùì B·∫†N C√ì CH·∫ÆC MU·ªêN TR·ªû V·ªÄ TRANG CH·ª¶?")) { location.reload(); } }
    </script>
</body>
</html>
