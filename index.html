<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Trang web xem g√¨ c≈©ng ƒë∆∞·ª£c</title>
    <script src="https://www.youtube.com/iframe_api"></script>
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        @property --angle { syntax: '<angle>'; initial-value: 0deg; inherits: false; }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient-move 15s ease infinite;
            color: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden; position: relative; transition: background 0.5s ease;
        }

        /* HI·ªÜU ·ª®NG B·∫§M N√öT CHO T·∫§T C·∫¢ C√ÅC BUTTON */
        button:active { transform: scale(0.92); transition: 0.1s; }

        @media (min-width: 1025px) {
            header h1 { font-size: 2.2rem !important; }
            #mainMenu, #mainWatch { max-width: 900px !important; }
        }
        @media (max-width: 767px) {
            header h1 { font-size: 1.3rem !important; }
        }

        #particleCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        @keyframes gradient-move { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .ripple { position: absolute; border-radius: 50%; background: rgba(255, 255, 255, 0.5); transform: scale(0); animation: ripple-animation 0.4s ease-out; pointer-events: none; z-index: 99999; }
        @keyframes ripple-animation { to { transform: scale(1.5); opacity: 0; } }

        body::before { content: ""; position: fixed; top: 0; left: 0; right: 0; bottom: 0; border: 5px solid transparent; border-image: linear-gradient(var(--angle), red, yellow, lime, cyan, blue, magenta, red) 1; z-index: 9999; pointer-events: none; animation: rotate-angle 10s linear infinite; }
        @keyframes rotate-angle { to { --angle: 360deg; } }

        .container { width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; padding: 20px; z-index: 10; position: relative; }

        header { text-align: center; margin-bottom: 15px; }
        header h1 { color: #000 !important; text-transform: uppercase; margin: 0; text-shadow: 1px 1px 2px rgba(255,255,255,0.4); }
        .author-text { font-weight: bold; font-size: 0.8rem; color: #222; margin-top: 5px; }

        #mainMenu { width: 100%; max-width: 500px; display: flex; flex-direction: column; height: 78vh; }
        .search-group { background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(15px); padding: 15px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.3); margin-bottom: 10px; }

        input, textarea { width: 100%; padding: 12px; border-radius: 10px; border: none; background: rgba(0,0,0,0.6); color: #fff; margin-bottom: 10px; outline: none; font-size: 15px; }
        textarea { height: 80px; resize: none; }

        .btn-row { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .main-btn { width: 100%; padding: 10px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; color: #fff; text-transform: uppercase; font-size: 0.7rem; transition: 0.3s; }
        #actionBtn { background: linear-gradient(90deg, #ff0000, #ff5555); animation: pulse-btn 2s infinite; grid-column: span 2; margin-bottom: 5px; }
        .btn-info { background: #5352ed; }
        .btn-admin { background: #222; }
        @keyframes pulse-btn { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }

        #results { width: 100%; overflow-y: auto; flex-grow: 1; background: rgba(0, 0, 0, 0.4); border-radius: 15px; padding: 8px; border: 1px solid rgba(255,255,255,0.1); }
        .video-item { display: flex; align-items: center; background: rgba(255, 255, 255, 0.95); margin-bottom: 8px; padding: 8px; border-radius: 10px; cursor: pointer; }
        .video-title { color: #000; font-size: 0.8rem; margin: 0; font-weight: bold; }
        
        .video-tag { font-size: 0.6rem; background: #ff0000; color: #fff; padding: 2px 6px; border-radius: 3px; font-weight: bold; margin-top: 4px; display: inline-block; margin-right: 4px; }
        .tag-priority { background: #000 !important; }

        #mainWatch { display: none; width: 100%; flex-direction: column; align-items: center; }
        .player-border { width: 100%; max-width: 800px; padding: 4px; background: linear-gradient(var(--angle), red, cyan, magenta, red); border-radius: 15px; animation: rotate-angle 5s linear infinite; }
        .player-content { background: #000; border-radius: 12px; position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; }
        #videoFrame { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        /* THANH PROGRESS V√ÄNG KH√à 50% ƒê·ªé L·ªäM 75% */
        .progress-container { width: 100%; max-width: 800px; height: 22px; background: #111; border-radius: 10px; margin-top: 15px; position: relative; overflow: hidden; }
        #progressBar { height: 100%; width: 0%; transition: width 0.5s linear, background-color 0.3s ease; }
        #progressText { position: absolute; width: 100%; text-align: center; font-size: 0.75rem; font-weight: bold; top: 3px; color: #fff; z-index: 5; }
        
        .control-panel { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; width: 100%; max-width: 500px; margin-top: 15px; }
        .ctrl-btn { padding: 12px 5px; border: none; border-radius: 10px; font-weight: bold; color: #fff; font-size: 0.7rem; cursor: pointer; text-transform: uppercase; }
        .btn-stop { background: #ff0000 !important; } 
        .btn-pause { background: #ffa502; } 
        .btn-home { background: #2ed573; color: #000; } 
        .btn-bg { background: #1e90ff; }
        .btn-dl { background: #8e44ad; grid-column: span 2; }

        .modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 85%; max-width: 400px; background: #fff; color: #000; padding: 20px; border-radius: 20px; z-index: 100000; box-shadow: 0 0 30px rgba(0,0,0,0.5); }
        #modalOverlay { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index: 99999; }
        .modal-title { font-weight: bold; font-size: 1.1rem; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 10px; color: #5352ed; text-align: center; }
        .btn-submit { width: 100%; background: #ff4757; color: #fff; border: none; padding: 12px; border-radius: 10px; margin-top: 5px; font-weight: bold; cursor: pointer; }

        footer { margin-top: auto; padding: 10px; text-align: center; font-size: 0.6rem; color: #111; font-weight: bold; }
        .footer-bug { background: #ff4757; color: #fff; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-top: 5px; display: inline-block; border: none; font-size: 0.65rem; font-weight: bold; }
    </style>
</head>
<body onclick="createRipple(event)">

    <canvas id="particleCanvas"></canvas>
    <div id="modalOverlay" onclick="closeAllModals()"></div>

    <div id="infoModal" class="modal">
        <div class="modal-title">‚ÑπÔ∏è TH√îNG TIN & UPDATE</div>
        <div style="font-size: 0.8rem; line-height: 1.6; max-height: 200px; overflow-y: auto;">
            <b>Phi√™n b·∫£n: 3.0.0</b><br>
            <i>Ng√†y: 04/02/2026</i><br><br>
            1. + Hi·ªáu ·ª©ng co gi√£n khi b·∫•m n√∫t.<br>
            2. + Th√™m tag VIDEO MUSIC.<br>
            3. + DOWNLOAD MP3 x√°c nh·∫≠n r·ªùi trang.<br>
            4. + Progress: 50% v√†ng kh√®, 75% ƒë·ªè l·ªãm.<br>
            ======================<br>
            <i>Code by: Nguy·ªÖn Ch√≠ D·ª± üáªüá≥</i>
        </div>
        <button class="btn-submit" style="background: #5352ed;" onclick="closeAllModals()">ƒê√É HI·ªÇU ‚úÖ</button>
    </div>

    <div id="bugModal" class="modal">
        <div class="modal-title">üêû B√ÅO C√ÅO L·ªñI H·ªÜ TH·ªêNG</div>
        <form id="bugForm" onsubmit="sendBug(event)">
            <p style="font-size: 0.75rem; font-weight: bold; margin-bottom: 5px;">T√äN C·ª¶A B·∫†N? (B·∫ÆT BU·ªòC)</p>
            <input type="text" id="bugName" required placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n...">
            <p style="font-size: 0.75rem; font-weight: bold; margin-bottom: 5px;">GMAIL C·ª¶A B·∫†N? (B·∫ÆT BU·ªòC)</p>
            <input type="email" id="bugEmail" required placeholder="Nh·∫≠p Gmail c·ªßa b·∫°n...">
            <p style="font-size: 0.75rem; font-weight: bold; margin-bottom: 5px;">TIN NH·∫ÆN Y√äU C·∫¶U S·ª¨A L·ªñI C·ª¶A B·∫†N? (B·∫ÆT BU·ªòC)</p>
            <textarea id="bugMsg" required placeholder="M√¥ t·∫£ l·ªói..."></textarea>
            <button type="submit" class="btn-submit">G·ª¨I Y√äU C·∫¶U üöÄ</button>
        </form>
    </div>

    <div class="container">
        <header>
            <h1>Trang web xem g√¨ c≈©ng ƒë∆∞·ª£c</h1>
            <p class="author-text">CODE B·ªûI : NGUY·ªÑN CH√ç D·ª∞ üáªüá≥</p>
        </header>

        <div id="mainMenu">
            <div class="search-group">
                <input type="text" id="userInput" placeholder="Nh·∫≠p b√†i h√°t ho·∫∑c d√°n link..." oninput="updateButtonText()">
                <div class="btn-row">
                    <button id="actionBtn" class="main-btn" onclick="handleLogic()">üìù G·ª¨I ƒê·∫æN H·ªÜ TH·ªêNG</button>
                    <button class="main-btn btn-info" onclick="showModal('infoModal')">‚ÑπÔ∏è TH√îNG TIN & UPDATE</button>
                    <button class="main-btn btn-admin" onclick="alert('H·ªá th·ªëng qu·∫£n l√Ω: Ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng ‚úÖ')">‚öôÔ∏è QU·∫¢N L√ù</button>
                </div>
            </div>
            <div id="results"></div>
        </div>

        <div id="mainWatch">
            <div class="player-border">
                <div class="player-content" id="playerWrapper"></div>
            </div>
            <div class="progress-container">
                <div id="progressBar"></div>
                <div id="progressText">0%</div>
            </div>
            <div id="nowPlaying" style="margin: 10px 0; font-size:0.8rem; font-weight:bold; text-align:center; color: #000; background: rgba(255,255,255,0.4); border-radius: 5px; padding: 5px;">üéß ƒêang t·∫£i...</div>
            <div class="control-panel">
                <button class="ctrl-btn btn-stop" onclick="confirmStop()">üõë STOP</button>
                <button class="ctrl-btn btn-pause" id="playPauseBtn" onclick="togglePlay()">‚è∏Ô∏è T·∫†M D·ª™NG</button>
                <button class="ctrl-btn btn-bg" onclick="changeBgPhoto()">üñºÔ∏è ƒê·ªîI N·ªÄN ·∫¢NH</button>
                <button class="ctrl-btn btn-home" onclick="confirmHome()">üè† TRANG CH·ª¶</button>
                <button class="ctrl-btn btn-dl" onclick="handleDownload()">üì• DOWNLOAD MP3</button>
            </div>
        </div>
        
        <footer>
            MADE IN VN üáªüá≥ | CODE BY : Nguy·ªÖn Ch√≠ D·ª± üáªüá≥‚ô•Ô∏èüáªüá≥<br>
            ¬© B·∫¢N QUY·ªÄN WEBSITE THU·ªòC V·ªÄ : NGUY·ªÑN CH√ç D·ª∞ ‚ô•Ô∏èüáªüá≥‚ô•Ô∏è<br>
            <button class="footer-bug" onclick="showModal('bugModal')">üêû REPORT BUGS</button>
        </footer>
    </div>

    <script>
        const API_KEY = 'AIzaSyAUjIhkSjpJ91X9Ua3ZTduij-mtArkcYas';
        let player, progressInterval, currentTitle = "", currentVidId = "";
        
        // TH√äM TAG VIDEO MUSIC V√ÄO DANH S√ÅCH
        const tagsToFind = [
            "OFFICIAL MV", "OFFICIAL MUSIC VIDEO", "OFFICIAL VIDEO", "VIDEO OFFICIAL", 
            "VIDEO MUSIC", "HOT TIK TOK", "NH·∫†C TR·∫∫", "BOLERO", "REMIX", "NONSTOP", 
            "VINAHOUSE", "DJ", "EDM", "PARODY", "COVER", "LOFI", "STEP"
        ];
        const badWords = ["sex", "porn", "phim 18", "ƒë·ªìi tr·ª•y"];

        const canvas = document.getElementById('particleCanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function initParticles() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            particles = [];
            for (let i = 0; i < 30; i++) {
                particles.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, size: Math.random()*2+1, speedX: Math.random()*0.4-0.2, speedY: Math.random()*0.4-0.2, opacity: Math.random()*0.3+0.1});
            }
        }
        function drawParticles() {
            ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle="white";
            particles.forEach(p => { ctx.globalAlpha=p.opacity; ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,Math.PI*2); ctx.fill(); p.x+=p.speedX; p.y+=p.speedY; if(p.x<0||p.x>canvas.width)p.speedX*=-1; if(p.y<0||p.y>canvas.height)p.speedY*=-1; });
            requestAnimationFrame(drawParticles);
        }
        initParticles(); drawParticles();

        function createRipple(e) {
            const ripple = document.createElement("div"); ripple.className = "ripple"; document.body.appendChild(ripple);
            ripple.style.left = `${e.clientX-25}px`; ripple.style.top = `${e.clientY-25}px`;
            ripple.style.width = ripple.style.height = `50px`; ripple.addEventListener("animationend", () => ripple.remove());
        }

        function showModal(id) { document.getElementById(id).style.display = 'block'; document.getElementById('modalOverlay').style.display = 'block'; }
        function closeAllModals() { 
            document.getElementById('infoModal').style.display = 'none'; 
            document.getElementById('bugModal').style.display = 'none'; 
            document.getElementById('modalOverlay').style.display = 'none'; 
        }

        function sendBug(e) {
            e.preventDefault();
            alert("‚úÖ C·∫¢M ∆†N " + document.getElementById('bugName').value.toUpperCase() + "! Y√äU C·∫¶U S·ª¨A L·ªñI ƒê√É ƒê∆Ø·ª¢C G·ª¨I ƒê·∫æN √îNG D·ª∞.");
            closeAllModals(); document.getElementById('bugForm').reset();
        }

        function updateButtonText() {
            const val = document.getElementById('userInput').value.trim();
            const btn = document.getElementById('actionBtn');
            btn.innerText = val === "" ? "üìù G·ª¨I ƒê·∫æN H·ªÜ TH·ªêNG" : (val.includes('http') ? "‚åõ X√ÅC TH·ª∞C LINK" : "üîç T√åM KI·∫æM");
        }

        function changeBgPhoto() {
            const id = Math.floor(Math.random() * 1000);
            document.body.style.background = `url('https://picsum.photos/id/${id}/1920/1080') no-repeat center center fixed`;
            document.body.style.backgroundSize = "cover";
            alert(" ‚úÖ ƒê√É ƒê·ªîI BACKGROUND CHO B·∫†N");
        }

        async function handleLogic() {
            const val = document.getElementById('userInput').value.trim();
            if (!val) { alert("‚ùå B·∫†N CH∆ØA NH·∫¨P G√å M√Ä üôÑ"); return; }
            if (badWords.some(w => val.toLowerCase().includes(w))) {
                if(confirm(" ‚ö†Ô∏è C·∫¢NH B√ÅO : B·∫†N X√ÅC NH·∫¨N MU·ªêN XEM N·ªòI DUNG NH·∫†Y C·∫¢M?")) { alert("‚ùå H·ªÜ TH·ªêNG KH√îNG H·ªñ TR·ª¢ N·ªòI DUNG N√ÄY!"); return; } else return;
            }
            if (val.includes('http')) {
                const id = extractId(val);
                if (id) { alert("‚úÖ X√ÅC TH·ª∞C LINK TH√ÄNH C√îNG"); playVideo(id); }
                else alert(" ‚ùå T√åM KI·∫æM TH·∫§T B·∫†I");
            } else { searchYT(val); }
        }

        async function searchYT(q) {
            const btn = document.getElementById('actionBtn'); btn.innerText = "üîç ƒêANG T√åM...";
            try {
                const res = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=40&q=${q}&type=video&key=${API_KEY}`);
                if (res.status === 403) { alert(" ‚åõ H·∫æT L∆Ø·ª¢T T√åM KI·∫æM H√îM NAY"); btn.innerText = "üîç T√åM KI·∫æM"; return; }
                const data = await res.json(); btn.innerText = "üîç T√åM KI·∫æM";
                const resBox = document.getElementById('results'); resBox.innerHTML = "";
                if(data.items && data.items.length > 0) {
                    alert(` ‚úÖ ƒê√É T√åM TH·∫§Y B√ÄI H√ÅT : ${data.items[0].snippet.title.toUpperCase()}`);
                    data.items.forEach((item) => {
                        const div = document.createElement('div'); div.className = 'video-item';
                        div.onclick = () => { currentTitle = item.snippet.title; playVideo(item.id.videoId); };
                        div.innerHTML = `<img src="${item.snippet.thumbnails.default.url}" style="width:60px;height:45px;border-radius:5px;margin-right:10px;object-fit:cover;"><div style="flex:1;"><p class="video-title">${item.snippet.title}</p>${getTags(item.snippet.title, q)}</div>`;
                        resBox.appendChild(div);
                    });
                } else { alert(" ‚ùå KH√îNG T√åM TH·∫§Y K·∫æT QU·∫¢"); }
            } catch { alert(" ‚ùå L·ªñI H·ªÜ TH·ªêNG"); btn.innerText = "üîç T√åM KI·∫æM"; }
        }

        function getTags(title, query) {
            let h = ""; 
            const uTitle = title.toUpperCase();
            const uQuery = query.toLowerCase();
            const hasRemix = uQuery.includes("remix");

            if (!hasRemix) {
                if (uTitle.includes("OFFICIAL MV")) h += `<span class="video-tag tag-priority">OFFICIAL MV</span> `;
                if (uTitle.includes("OFFICIAL MUSIC VIDEO")) h += `<span class="video-tag tag-priority">OFFICIAL MUSIC VIDEO</span> `;
                if (uTitle.includes("OFFICIAL VIDEO")) h += `<span class="video-tag tag-priority">OFFICIAL VIDEO</span> `;
                if (uTitle.includes("VIDEO OFFICIAL")) h += `<span class="video-tag tag-priority">VIDEO OFFICIAL</span> `;
                if (uTitle.includes("VIDEO MUSIC")) h += `<span class="video-tag tag-priority">VIDEO MUSIC</span> `;
            }

            tagsToFind.forEach(tag => { 
                if (!h.includes(tag) && uTitle.includes(tag)) {
                    h += `<span class="video-tag">${tag}</span> `;
                }
            });
            return h;
        }

        function playVideo(id) {
            currentVidId = id;
            document.getElementById('mainMenu').style.display = 'none'; document.getElementById('mainWatch').style.display = 'flex';
            document.getElementById('playerWrapper').innerHTML = '<div id="videoFrame"></div>';
            player = new YT.Player('videoFrame', { videoId: id, playerVars: {'autoplay': 1, 'controls': 1}, events: { 'onStateChange': onStateChange, 'onReady': () => { document.getElementById('nowPlaying').innerText = "üéß ƒêANG PH√ÅT: " + currentTitle; }} });
        }

        function updateProgress() {
            clearInterval(progressInterval);
            progressInterval = setInterval(() => {
                if (player && player.getDuration) {
                    let per = Math.floor((player.getCurrentTime() / player.getDuration()) * 100) || 0;
                    const bar = document.getElementById('progressBar'); 
                    bar.style.width = per + "%"; 
                    document.getElementById('progressText').innerText = per + "%";
                    
                    if (per < 50) {
                        bar.style.backgroundColor = "#2ed573";
                    } else if (per < 75) {
                        bar.style.backgroundColor = "#ffff00"; // V√ÄNG KH√à
                    } else {
                        bar.style.backgroundColor = "#ff0000"; // ƒê·ªé L·ªäM
                    }
                }
            }, 1000);
        }

        function handleDownload() {
            if(confirm("‚ùì B·∫†N C√ì MU·ªêN R·ªúI TRANG WEB N√ÄY ƒê·ªÇ T·∫¢I MP3?")) {
                window.open(`https://www.youtubepp.com/watch?v=${currentVidId}`, '_blank');
            }
        }

        function onStateChange(e) { if (e.data == YT.PlayerState.PLAYING) updateProgress(); else clearInterval(progressInterval); }
        function extractId(u) { const m = u.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/); return (m && m[2].length == 11) ? m[2] : null; }
        function togglePlay() { const s = player.getPlayerState(); s == 1 ? player.pauseVideo() : player.playVideo(); document.getElementById('playPauseBtn').innerText = s == 1 ? "‚ñ∂Ô∏è TI·∫æP T·ª§C" : "‚è∏Ô∏è T·∫†M D·ª™NG"; }
        function confirmStop() { if(confirm("üõë D·ª™NG VIDEO: " + currentTitle.toUpperCase() + "?")) player.stopVideo(); }
        function confirmHome() { if(confirm("üè† V·ªÄ TRANG CH·ª¶?")) location.reload(); }
        window.addEventListener('resize', initParticles);
    </script>
</body>
</html>
